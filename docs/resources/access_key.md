---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "infra_access_key Resource - terraform-provider-infra"
subcategory: ""
description: |-
  Provides an Infra access key. This resource can be used to create and manage access keys.
---

# infra_access_key (Resource)

Provides an Infra access key. This resource can be used to create and manage access keys.

## Example Usage

```terraform
# Create an access key. The access key will expire after 30 days.
resource "infra_access_key" "example" {
  name = "example"
}

# Create an access key that expires in 90 days.
resource "infra_access_key" "expires_in" {
  name       = "expires_in"
  expires_in = "2160h0m0s" # 24h * 90
}

# Create an access key that expires on December 31, 2023 at 23:59:59 UTC.
resource "infra_access_key" "expires_at" {
  name       = "expires_at"
  expires_at = "2023-12-31T23:59:59Z"
}

# Create an access key that expires in 3 days if not used.
resource "infra_access_key" "inactivity_timeout" {
  name               = "inactivity_timeout"
  inactivity_timeout = "72h"
}

# Create an access key for user@example.com.
resource "infra_access_key" "user_email" {
  name       = "user_email"
  user_email = "user@example.com"
}

# Create a connector access key and install the infra connector using Helm
resource "infra_access_key" "connector" {
  connector_access_key = true
}

resource "helm_release" "infra" {
  repository = "https://helm.infrahq.com"
  chart      = "infra"
  version    = "0.20.6"

  name             = "infra-connector"
  namespace        = "infrahq"
  create_namespace = true

  set {
    name  = "connector.config.accessKey"
    value = infra_access_key.connector.secret
  }

  set {
    name  = "connector.config.server"
    value = "https://api.infrahq.com"
  }

  set {
    name  = "connector.config.name"
    value = "my_cluster"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `connector_access_key` (Boolean) Issue a `connector` access key. This also changes the default expiration duration from 3 days to 10 years and inactivity timeout to 30 days. Cannot be used with `user_id`, `user_email`.
- `expires_at` (String) The date-time when the access key will expire. Format is a RFC3339 timestamp, e.g. "2006-01-02T15:04:05Z07:00." Cannot be used with `expires_in`.
- `expires_in` (String) The total amount of time before the access key expires. Format is a duration string, a sequence of decimal numbers, each with optional fraction and a unit suffix, such as "300s" or "2h45m". Valid time units are "s", "m", "h". Default is 720h0m0s. Cannot be used with `expires_at`.
- `inactivity_timeout` (String) The amount of time before the access key expires if left unused. If the access key is used before it expires, it will be renewed for the same duration. Format is a duration string, a sequence of decimal numbers, each with optional fraction and a unit suffix, such as "300s" or "2h45m". Valid time units are "s", "m", "h". If value is greater than or equal to the remaining lifetime of the access key, the access key will not be renewed.
- `name` (String) The access key's name. If omitted, a name will be automatically generated. Identity provider names may include letters (uppercase and lowercase), numbers, underscores `_`, hyphens `-`, and periods `.`.
- `user_email` (String) The email of the user for whom this access key is issued. If neither `user_id` nor `user_email` are set, the access key will be created for the current user. Cannot be used with `user_id`, `connector_access_key`.
- `user_id` (String) The ID of the user for whom this access key is issued. If neither `user_id` nor `user_email` are set, the access key will be created for the current user. Cannot be used with `user_email`, `connector_access_key`.

### Read-Only

- `id` (String) The access key's unique identifier.
- `secret` (String, Sensitive) The access key secret.


